{"is_source_file": true, "format": "JavaScript", "description": "This file manages the local data store for a notes application, defining data structures, filesystem operations for persisting data, and functions for CRUD operations on users and notes.", "external_files": ["fs", "path"], "external_methods": ["fs.existsSync", "fs.mkdirSync", "fs.readFileSync", "fs.writeFileSync"], "published": ["getUsers", "getNotes", "addUser", "findUserByEmail", "findUserById", "addNote", "findNoteById", "updateNote", "deleteNote", "replaceAllNotesForUser"], "classes": [], "methods": [{"name": "ensureDataDir()", "description": "Ensures that the data directory exists, creating it if necessary.", "scope": "", "scopeKind": ""}, {"name": "loadData()", "description": "Loads data from the data file, returning default data if reading fails.", "scope": "", "scopeKind": ""}, {"name": "saveData(data)", "description": "Persists the provided data object to the data file.", "scope": "", "scopeKind": ""}, {"name": "getUsers()", "description": "Returns all user entries from the in-memory database.", "scope": "", "scopeKind": ""}, {"name": "getNotes()", "description": "Returns all note entries from the in-memory database.", "scope": "", "scopeKind": ""}, {"name": "addUser(user)", "description": "Adds a new user object to the database and saves.", "scope": "", "scopeKind": ""}, {"name": "findUserByEmail(email)", "description": "Finds a user in the database by email address.", "scope": "", "scopeKind": ""}, {"name": "findUserById(id)", "description": "Finds a user by their unique ID.", "scope": "", "scopeKind": ""}, {"name": "addNote(note)", "description": "Adds a new note to the database and saves.", "scope": "", "scopeKind": ""}, {"name": "findNoteById(id)", "description": "Finds a note by its unique ID.", "scope": "", "scopeKind": ""}, {"name": "updateNote(id, updates)", "description": "Updates properties of an existing note and saves.", "scope": "", "scopeKind": ""}, {"name": "deleteNote(id)", "description": "Removes a note by ID from the database.", "scope": "", "scopeKind": ""}, {"name": "replaceAllNotesForUser(userId, notes)", "description": "Replaces all notes for a specific user, useful for bulk updates.", "scope": "", "scopeKind": ""}], "calls": ["fs.existsSync", "fs.mkdirSync", "fs.readFileSync", "fs.writeFileSync"], "search-terms": ["local data store", "notes_backend", "storage functions", "file-based persistence", "JSON data management"], "state": 2, "file_id": 13, "knowledge_revision": 27, "git_revision": "", "ctags": [{"_type": "tag", "name": "DATA_DIR", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^const DATA_DIR = path.join(__dirname, '..\\/..\\/data');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "DATA_FILE", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^const DATA_FILE = path.join(DATA_DIR, 'store.json');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "addNote", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function addNote(note) {$/", "language": "JavaScript", "kind": "function", "signature": "(note)"}, {"_type": "tag", "name": "addUser", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function addUser(user) {$/", "language": "JavaScript", "kind": "function", "signature": "(user)"}, {"_type": "tag", "name": "defaultData", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^const defaultData = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function deleteNote(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "ensureDataDir", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function ensureDataDir() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "findNoteById", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function findNoteById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "findUserByEmail", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function findUserByEmail(email) {$/", "language": "JavaScript", "kind": "function", "signature": "(email)"}, {"_type": "tag", "name": "findUserById", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function findUserById(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^const fs = require('fs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function getNotes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getUsers", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^  getUsers,$/", "language": "JavaScript", "kind": "field", "scope": "module.exports", "scopeKind": "class"}, {"_type": "tag", "name": "getUsers", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function getUsers() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "loadData", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function loadData() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "meta", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^  meta: {$/", "language": "JavaScript", "kind": "class", "scope": "defaultData", "scopeKind": "class"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^  notes: [], \\/\\/ { id, userId, title, content, tags: [], createdAt, updatedAt, pinned, archived/", "language": "JavaScript", "kind": "property", "scope": "defaultData", "scopeKind": "class"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "replaceAllNotesForUser", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function replaceAllNotesForUser(userId, notes) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, notes)"}, {"_type": "tag", "name": "saveData", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function saveData(data) {$/", "language": "JavaScript", "kind": "function", "signature": "(data)"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^function updateNote(id, updates) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, updates)"}, {"_type": "tag", "name": "users", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^  users: [], \\/\\/ { id, email, passwordHash, name, createdAt }$/", "language": "JavaScript", "kind": "property", "scope": "defaultData", "scopeKind": "class"}, {"_type": "tag", "name": "version", "path": "/home/kavia/workspace/code-generation/personal-notes-organizer-30661-30670/notes_backend/src/store/db.js", "pattern": "/^    version: 1$/", "language": "JavaScript", "kind": "property", "scope": "defaultData.meta", "scopeKind": "class"}], "hash": "42e15fe6f7a620c2c7378f443c25266a", "format-version": 4, "code-base-name": "notes_backend", "filename": "notes_backend/src/store/db.js", "fields": [{"name": "getUsers,", "scope": "module.exports", "scopeKind": "class", "description": "unavailable"}, {"name": "notes: [], \\/\\/ { id, userId, title, content, tags: [], createdAt, updatedAt, pinned, archived/", "scope": "defaultData", "scopeKind": "class", "description": "unavailable"}, {"name": "users: [], \\/\\/ { id, email, passwordHash, name, createdAt }", "scope": "defaultData", "scopeKind": "class", "description": "unavailable"}, {"name": "version: 1", "scope": "defaultData.meta", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"27": ""}]}